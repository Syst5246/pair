<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pair Maker b8</title>
    <style>
        body {
            background-color: #1E1E1E;
            color: #E0E0E0;
            font-family: Arial, sans-serif;
           
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 95%;
            max-width: 800px;
        }

        input, button {
            width: 93%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }

        input {
            background-color: #2E2E2E;
            color: white;
        }
        button {
            background: #444;
            color: white;
            border: none;
            padding: 5px;
            margin: 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background: #666;
        }

       

        .scroll-container {
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 5px;
        }

        .pair-list {
            margin-top: 10px;
        }

       .pair-item {
    display: flex;
    align-items: center;
    padding: 5px;
    border-bottom: 1px solid #444;
}

.pair-item .text {
    flex-grow: 1;  
    text-align: left;  
}

.pair-item button {
    padding: 5px 10px; 
    margin-left: 5px;  
    border: none;
    border-radius: 5px;
    background: #444;
    color: white;
    cursor: pointer;
    font-size: 12px;  
    text-align: center; 
    width: auto; 
    max-width: 30%;  
}

.pair-item button:hover {
    background: #666;
}

@media (max-width: 600px) {
    .pair-item button {
        font-size: 10px;  
    }
}



        .scroll-container::-webkit-scrollbar {
            width: 8px;
        }

        .scroll-container::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 5px;
        }

        .scroll-container::-webkit-scrollbar-track {
            background: #2E2E2E;
        }

        @media (max-width: 600px) {
            .container {
                width: 100%;
                padding: 10px;
            }

           
        }
    </style>
</head>
<body>
    <div class="container">
        <input type="text" id="search" placeholder="Seach by id" oninput="updateResults()">
        <div class="scroll-container" id="results"></div>
        <div class="scroll-container" id="favorites"></div>
        

        
        <p id="current-selection">New: None | Old: None</p>
        <button onclick="addPair()">ADD</button>
        <div class="scroll-container pair-list" id="pairs"></div>
        <button onclick="copyPairs()">COPY</button>
    </div>

    <script>
   let items = [];
let favorites = [];
let leftItem = null;
let rightItem = null;
let pairs = [];

function loadFiles() {
    fetch("items.txt").then(response => response.text()).then(text => {
        items = text.trim().split("\n").map(line => line.trim()).filter(line => line);
        updateResults();
    });

    fetch("my.txt").then(response => response.text()).then(text => {
        favorites = text.trim().split("\n").map(line => line.trim()).filter(line => line);
        updateResults();
    });
}

function updateResults() {
    const query = document.getElementById("search").value.toLowerCase();
    const resultsContainer = document.getElementById("results");
    resultsContainer.innerHTML = "";

    const filtered = items.filter(item => item.toLowerCase().includes(query)).slice(0, 100);
    filtered.forEach(item => createResultBlock(item, resultsContainer));

    const favoritesContainer = document.getElementById("favorites");
    favoritesContainer.innerHTML = "";
    favorites.forEach(item => createResultBlock(item, favoritesContainer, true));
}

function createResultBlock(item, container, isFavorite = false) {
    const div = document.createElement("div");
    div.className = "pair-item";
    div.innerHTML = `
        <span>${getItemNameByID(item)}</span>
        <button onclick="selectItem('${item}', 'left')">New</button>
        <button onclick="selectItem('${item}', 'right')">Old</button>
        <button onclick="toggleFavorite('${item}')">${isFavorite ? "‚ùå" : "üíö"}</button>
    `;
    container.appendChild(div);
}

function selectItem(item, type) {
    if (type === "left") {
        leftItem = item;
    } else {
        rightItem = item;
    }
    document.getElementById("current-selection").textContent = `New: ${getItemNameByID(leftItem) || "None"} | Old: ${getItemNameByID(rightItem) || "None"}`;
}

function addPair() {
    if (leftItem && rightItem) {
        const newPair = `${leftItem},${rightItem}`;
        if (!pairs.includes(newPair)) {
            pairs.push(newPair);
            updatePairsList();
        }
    }
}

function updatePairsList() {
    const pairsContainer = document.getElementById("pairs");
    pairsContainer.innerHTML = "";
    pairs.forEach(pair => {
        const pairItems = pair.split(",");
        const leftID = pairItems[0]; // ID –ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        const rightID = pairItems[1]; // ID –ø—Ä–∞–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

        // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ ID
        const leftName = getItemNameByID(leftID);
        const rightName = getItemNameByID(rightID);

        const div = document.createElement("div");
        div.className = "pair-item";
        div.innerHTML = `<span>${leftName} - ${rightName}</span> <button onclick="removePair('${pair}')">‚úñ</button>`;
        pairsContainer.appendChild(div);
    });
}

function getItemNameByID(id) {
    // –ü–æ–∏—Å–∫ –Ω–∞–∑–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ ID
    const item = items.find(item => item.startsWith(id));
    return item ? item.split("|")[1].trim() : id; // –ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ, –∏–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∞–º ID
}

function removePair(pair) {
    pairs = pairs.filter(p => p !== pair);
    updatePairsList();
}

function copyPairs() {
    // –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ ID –≤ —Ñ–æ—Ä–º–∞—Ç–µ "ID1,ID2"
    const text = pairs.map(pair => {
        const pairItems = pair.split("|"); // –†–∞–∑–¥–µ–ª—è–µ–º –ø–æ —Å–∏–º–≤–æ–ª—É "|"
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã—Ö ID
        const id1 = pairItems[0].trim().match(/\d+/)[0]; // –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–µ—Ä–≤—ã–π ID
        const id2 = pairItems[1].trim().match(/\d+/)[0]; // –ò–∑–≤–ª–µ–∫–∞–µ–º –≤—Ç–æ—Ä–æ–π ID

        return `${id1},${id2}`; // –¢–æ–ª—å–∫–æ ID, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—è—Ç–æ–π
    }).join("\n");

    navigator.clipboard.writeText(text).then(() => {
        // –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
        const feedback = document.createElement("div");
        feedback.textContent = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
        feedback.style.position = "fixed";
        feedback.style.bottom = "20px";
        feedback.style.left = "50%";
        feedback.style.transform = "translateX(-50%)";
        feedback.style.backgroundColor = "#444";
        feedback.style.color = "white";
        feedback.style.padding = "10px";
        feedback.style.borderRadius = "5px";
        feedback.style.fontSize = "16px";
        document.body.appendChild(feedback);

        // –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            feedback.remove();
        }, 2000);
    }).catch(err => {
        console.error("Clipboard write failed:", err);
    });
}




function toggleFavorite(item) {
    if (favorites.includes(item)) {
        favorites = favorites.filter(fav => fav !== item);
    } else {
        favorites.push(item);
    }
    saveFavorites();
    updateResults();
}

function saveFavorites() {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª my.txt —Å –Ω–æ–≤—ã–º–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
    fetch("my.txt", {
        method: "POST",
        body: favorites.join("\n"),
        headers: { "Content-Type": "text/plain" }
    });
}

window.onload = loadFiles;




    </script>
</body>
</html>
